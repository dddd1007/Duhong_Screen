---
title: "boundary挑选程序"
output: html_notebook
---

## 1. 构造分析环境
```{r}
if(!require(readxl)){
  install.packages("readxl")
}
if(!require(tidyverse)){
  install.packages("tidyverse")
}
require(tidyverse)
```

## 2. 读取筛选规则
请选择包含读取规则的xlsx文件
```{r}
boundary <- read.csv(file.choose())
```

## 3. 筛选句子
```{r}
#读取需要筛选的文件
screen_data <- read.csv(file.choose(), header = TRUE, stringsAsFactors = FALSE)
screen_data <- cbind(screen_data, index = 1 : nrow(screen_data))

name_list <- unique(boundary$RECORDING_SESSION_LABEL)

del_index <- 0

for(i in name_list){
  cheak_table <- screen_data %>% 
    filter(RECORDING_SESSION_LABEL == i)
  
  a = 0
  for(j in as.numeric(boundary[boundary$RECORDING_SESSION_LABEL == i,]$sentence)){
    a <- c(a, cheak_table$index[cheak_table$sentence == j])
  }
  a <- a[-1]
  
  del_index <- c(del_index, a)
}

del_index <- del_index[del_index != 0]

screen_data[-del_index, ] -> screened_data

write.csv(screen_data, "screened_data.csv")
```


